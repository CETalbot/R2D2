<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Bee Random Movement</title>
	<style type="text/css">
		canvas {border:1px solid black;}/*setting the styling for the canvas*/
		canvas {background: url('hiveTotal.svg');
		background-size: cover;
	}
	</style>
	<script type="text/javascript">
		window.onload = function (){//creating a 'window.onload' function so the JavaScript code will be ran once the page has been loaded
			var canvas = document.getElementById('bee');
			var ctx = canvas.getContext('2d');
			canvas.height = canvas.width / 1.4;//using this calculation to draw the bee to the correct proportion so it is not squished or stretched
			var x = canvas.width;//creating a varaible to store the value for the width of the canvas
			var y = canvas.height;//creating a variable to store the value for the height of the canvas
			//Used https://www.w3schools.com/js/js_properties.asp to look at the syntax for adding multiple properties to a variable
			var scene = {//creating a variable for the canvas and giving it properties
				"boundaryX": {//setting the properties for the boundary - x axis
					"min": 0,//the minimum value the boundary can be on the y axis is 0
					"max": x,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				},
				"boundaryY":{//setting the properties for the boundary - y axis
					"min": 0,//the minimum value the boundary can be on the y axis is 0
					"max": y,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				}
			}
			var bee = {//creating a variable fot the bee and giving it properties
			 	"src":"bee.svg",//setting the source for the bee image
			 	"centreX": 150,//setting the value of the bee
			 	"centreY": 200,//setting the value of the bee
			 	"speedX": 4,//setting the speed for the bee on the x axis
			 	"speedY": 2,//setting the speed for the bee on the y axis
			 	"maxSpeed": 5,//setting the maximum speed that the bee can go
			 }
				var beeImage = new Image();//creating a new image called 'beeImage'
				beeImage.src = "bee.svg";//setting the source for 'beeImage'

				var beeHive = new Image();
				beeHive.src = "beeHive.svg";

			var timer = 900;//setting a value for the timer
			var globalAlpha = 1;//setting a value for the transparency

			// function drawCircle(x,y,r){
			// 	ctx.beginPath();
			// 	ctx.arc(x,y,r,0,2*Math.PI);
			// 	ctx.fill();//filling the circle
			// }

			//creating random boundaries that keep changing that appear within the canvas (there has been a boundary created below that appears on the edges of the canvas) When the bee touches the boundaries if will apeear to 'bounce' off and a new randomly created set of boundaries is created and so on
			//boundaies referenced from the code examples found on blackboard html5canvas, ch5, CH5EX4.html
			function changeBoundaries() {
				if (bee.centreX - scene.boundaryX.min >= scene.boundaryX.max - bee.centreX) {
					scene.boundaryX.min = Math.floor(Math.random() * (x / 2));//using Math.random to create a random number for the x axis
				} else {
					scene.boundaryX.max = (x / 2) + Math.floor(Math.random() * (x / 2));//using Math.random to create a random number for the y axis

				}

				if (bee.centreY - scene.boundaryY.min >= scene.boundaryY.max - bee.centreY) {
					scene.boundaryY.min = Math.floor(Math.random() * (y / 2));

				} else {
					scene.boundaryY.max = (y / 2) + Math.floor(Math.random() * (y / 2));
				}

			}


			function animate(){//creating a function called 'animate'
				ctx.clearRect(0,0,x,y);//clearing the canvas
				// ctx.rect(scene.boundaryX.min, scene.boundaryY.min, scene.boundaryX.max, scene.boundaryY.max); //using this to draw a rectangle to show the boundaries to see if they are working
				// ctx.stroke();//drawing the rectangle
				// drawCircle(bee.centreX,bee.centreY,20);//calling the drawCircle function. The x and y cor-ordinates have been defined
				ctx.save();
				ctx.globalAlpha = globalAlpha;
				ctx.drawImage(beeImage,bee.centreX,bee.centreY, x / 25, y / 20);//drawing the image of the bee and then scaling the size of the bee
				//creating boundaries for the canvas so that the bee cannot go outside of the canvas. Also been created are random boundaries to make the bee movement appear more random (see 'changeBoundaries' function) . When the bee touches the boundaries if will apeear to 'bounce' off
				ctx.restore();
				if (bee.centreX < scene.boundaryX.min || bee.centreY < scene.boundaryY.min) {
					// bee.speedX = -bee.speedX;
					bee.speedX = 1 +Math.floor(Math.random()*bee.maxSpeed);
					// bee.speedY = -bee.speedY;
					bee.speedY = 1 +Math.floor(Math.random()*bee.maxSpeed);
					beeImage.src = "bee.svg";
					changeBoundaries();
				}else if (bee.centreX > scene.boundaryX.max || bee.centreY > scene.boundaryY.max){ //(|| means or)
					bee.speedX =  -1 - Math.floor(Math.random()*bee.maxSpeed);
					bee.speedY = -1 - Math.floor(Math.random()*bee.maxSpeed);
					beeImage.src = "beeLeft.svg";
					changeBoundaries();

				}




				//Used https://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_canvas_globalalpha for transparency on images
				//if the timer reaches 0 then the timer will be 'reset' and the image will not be transparent
				timer--;//decreaing the value of the timer
				if(timer == 0){
					globalAlpha = 1;
					timer = 900;
				}

				//changing the transparency of the bee image after a set amount of time
				if(timer <= 180){
					globalAlpha -= 1/180
				}







				//Used https://www.w3schools.com/js/js_operators.asp to look at the different operators to find the one that is needed
				bee.centreX += bee.speedX;//same as saying bee.centreX = beecentreX + bee.speedX
				bee.centreY +=bee.speedY;

				ctx.drawImage(beeHive,0,0,x,y);//drawing the image of the hive

				// NOTE TO SELF - IF THE BEE POS IS OUTSIDE OF BOUNDARY THEN CHANGE SPEED AND MAKE IT GO TO CENTRE - WRAP ANIMATE IF IN AN IF (IF WILL SAY - IF THE BEE POS IS OUTSIDE OF BOUNDARY THEN CHANGE SPEED AND MAKE IT GO TO CENTRE ELSE RANDOM SHIZZ)
			}
			setInterval(animate, 1000/60);//setInterval is a method that is used to call a function and runs the function after a certain amount of time. In this instance the animate function is being called every so many miliseconds. This animates the bee
		}
</script>
<script> // code for local Storage

function Session1() { // fuction for session 1
    if(typeof(Storage) !== "undefined") { // if local storage is supported then run the code below
        if (localStorage.clickcount1) { // if the local storage click count
            localStorage.clickcount1 = Number(localStorage.clickcount1)+1; // if the session 1 button is clicked then click count will save the number to local storage. If the session 1 button is clicked it will add one to the current value stored.
        } else { // if session 2 button hasnt been pressed
            localStorage.clickcount1 = 1; // then show the current total thats stored in the local storage
        }
        document.getElementById("result1").innerHTML = + localStorage.clickcount1 // get the id result1 and display the value thats stored click count of session 1 button
    } else { // if the value cannot be shown
        document.getElementById("result1").innerHTML = "Sorry, your browser does not support web storage..."; // show the text Sorry, your browser does not support web storage.
    }
}


function Session2() { // fuction for session 2
    if(typeof(Storage) !== "undefined") {// if local storage is supported then run the code below
        if (localStorage.clickcount2) { // if the local storage click count
            localStorage.clickcount2 = Number(localStorage.clickcount2)+1; // if the session 2 button is clicked then click count will save the number to local storage. If the session 2 button is clicked it will add one to the current value stored.
        } else { // if session 2 button hasnt been pressed
            localStorage.clickcount2 = 1;  // then show the current total thats stored in the local storage
        }
        document.getElementById("result2").innerHTML = + localStorage.clickcount2 // get the id result2 and display the value thats stored click count of session 2 button
    } else {  // if the value cannot be shown
        document.getElementById("result2").innerHTML = "Sorry, your browser does not support web storage..."; // show the text Sorry, your browser does not support web storage.
    }
}


function Session3() { // fuction for session 3
    if(typeof(Storage) !== "undefined") { // if local storage is supported then run the code below
        if (localStorage.clickcount3) { // if the local storage click count
            localStorage.clickcount3 = Number(localStorage.clickcount3)+1;// if the session 3 button is clicked then click count will save the number to local storage. If the session 3 button is clicked it will add one to the current value stored.
        } else { // if session 3 button hasnt been pressed
            localStorage.clickcount3 = 1; // then show the current total thats stored in the local storage
        }
        document.getElementById("result3").innerHTML = + localStorage.clickcount3 // get the id result3 and display the value thats stored click count of session 3 button
    } else { // if the value cannot be shown
        document.getElementById("result3").innerHTML = "Sorry, your browser does not support web storage..."; // show the text Sorry, your browser does not support web storage.
    }
    }



function Session4() { // fuction for session 3
    if(typeof(Storage) !== "undefined") { // if local storage is supported then run the code below
        if (localStorage.clickcount4) { // if the local storage click count
            localStorage.clickcount4 = Number(localStorage.clickcount4)+1;// if the session 4 button is clicked then click count will save the number to local storage. If the session 4 button is clicked it will add one to the current value stored.
        } else { // if session 3 button hasnt been pressed
            localStorage.clickcount4 = 1; // then show the current total thats stored in the local storage
        }
        document.getElementById("result4").innerHTML = + localStorage.clickcount4 // get the id result4 and display the value thats stored click count of session 4 button
    } else { // if the value cannot be shown
        document.getElementById("result4").innerHTML = "Sorry, your browser does not support web storage..."; // show the text Sorry, your browser does not support web storage.
    }
}

function reset() { // create function called reset
  localStorage.clear(); // when reset button is clicked clear any of the values stored in the local storage
}
// code refrenced from https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_webstorage_local_clickcount
</script>
</head>
<body>
	<canvas id="bee" width="800" height="600"></canvas><!--Creating a canvas element and giving it a width and a height-->

	<p><button onclick="Session1()" type="button">Session 1</button></p>
	<p>Session 1</p>
	<div id="result1"></div>

	<p><button onclick="Session2()" type="button">Session 2</button></p>
	<p>Session 2</p>
	<div id="result2"></div>

	<p><button onclick="Session3()" type="button">Session 3</button></p>
	<p>Session 3</p>
	<div id="result3"></div>

	<p><button onclick="Session4()" type="button">Session 4</button></p>

	<p>Session 4</p>
	<div id="result4"></div>

	<p><button onclick="reset()" type="button">reset</button></p>

	<p>Button press for conference sessions.</p>



</body>
</html>
