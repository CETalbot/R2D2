<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Bee Path To A Flower</title>
	<style type="text/css">
		canvas {border:1px solid black;}/*setting the styling for the canvas*/
		canvas {background: url('flowerSession.svg');
		background-size: cover;}
	</style>
	<script type="text/javascript">
		var beesTotal = 0;
		var bees = {"total":0,};
		window.onload = function (){//creating a 'window.onload' function so the JavaScript code will be ran once the page has been loaded
		//referenced from the code examples found on blackboard html5canvas, ch5, CH5EX11.html
			var canvas = document.getElementById('bee');
			var ctx = canvas.getContext('2d');
			//this code works out the proportion of the bee compared to the canvas
			canvas.height = canvas.width / 1.4;
			//working out width and height of canvas size
			var x = canvas.width;
			var y = canvas.height;



			function newBeeFunction(buttonNo){
				bees.total++;
					bees["bee"+(bees.total)] = {//creating a variable for the bee and giving it properties
			 		"src":"bee.svg",//setting the source for the bee image
			 		"transparency":1,
			 		"timer":150,
			 		"point0": {//setting the properties for the boundary - x axis
					"x":400,//the minimum value the boundary can be on the y axis is 0
					"y":200,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				},
			 		
			 		"point1": {//setting the properties for the boundary - x axis
					"x":70,//the minimum value the boundary can be on the y axis is 0
					"y":200,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				},
			
				"travelPosition":0,
				"speed":0.01,
			 	}
				if(buttonNo===1){
					bees["bee"+(bees.total)].point2 = {//setting the properties for the boundary - x axis
					"x":125,//the minimum value the boundary can be on the y axis is 0
					"y":295,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				};
				bees["bee"+(bees.total)].point3 = {//setting the properties for the boundary - x axis
					"x":30,//the minimum value the boundary can be on the y axis is 0
					"y":270,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				};}
				else if (buttonNo===2){
					bees["bee"+(bees.total)].point2 = {//setting the properties for the boundary - x axis
					"x":120,//the minimum value the boundary can be on the y axis is 0
					"y":260,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				};
				bees["bee"+(bees.total)].point3 = {//setting the properties for the boundary - x axis
					"x":105,//the minimum value the boundary can be on the y axis is 0
					"y":270,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				};}
				else if(buttonNo===3){
					bees["bee"+(bees.total)].point2 = {//setting the properties for the boundary - x axis
					"x":150,//the minimum value the boundary can be on the y axis is 0
					"y":260,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				};
				bees["bee"+(bees.total)].point3 = {//setting the properties for the boundary - x axis
					"x":190,//the minimum value the boundary can be on the y axis is 0
					"y":270,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				};}
				else if(buttonNo===4){
					bees["bee"+(bees.total)].point2 = {//setting the properties for the boundary - x axis
					"x":170,//the minimum value the boundary can be on the y axis is 0
					"y":240,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				};
				bees["bee"+(bees.total)].point3 = {//setting the properties for the boundary - x axis
					"x":275,//the minimum value the boundary can be on the y axis is 0
					"y":270,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				};}
				else if(buttonNo===5){
					bees["bee"+(bees.total)].point2 = {//setting the properties for the boundary - x axis
					"x":190,//the minimum value the boundary can be on the y axis is 0
					"y":230,//the maximum value the boundary can be on the x axis is the value of width of the canvas
				};
				bees["bee"+(bees.total)].point3 = {//setting the properties for the boundary - x axis
					"x":360,//the minimum value the boundary can be on the y axis is 0
					"y":270,//the maximum value the boundary can be on the y axis is the value of the height of the canvas
				};}
		

				console.log(bees);
			

			};
			//creating the hive and bee images inside the canvas
			var beeImage = new Image();
			beeImage.src = "bee.svg";
			var beeHive = new Image();
			beeHive.src = "beeHive.svg";

			//creating function animation for bee to flow a path
			function bee(){
			//clears whole of canvas
			ctx.clearRect(0,0,x,y);
			//drawing the hive image within the canvas
			ctx.drawImage(beeHive, 0, 0, x, y);

			for (var i=1; i<= bees.total; i++){
				var currentBee = bees["bee" + i];
				


			//start point of the curve path x value
			currentBee.curveX = 3 * (currentBee.point1.x - currentBee.point0.x);
			//the x value of the bezier curve on the second curve
			currentBee.bezierX = 3 * (currentBee.point2.x - currentBee.point1.x) - currentBee.curveX;
			//the start position of the path for the bee to follow x value
			currentBee.startPositionX = currentBee.point3.x - currentBee.point0.x - currentBee.curveX - currentBee.bezierX;

			//start point of the curve path y value
			currentBee.curveY = 3 * (currentBee.point1.y - currentBee.point0.y);
			//the y value of the bezier curve on the second curve
			currentBee.bezierY = 3 * (currentBee.point2.y - currentBee.point1.y) - currentBee.curveY;
			//the start position of the path for the bee to follow y value
			currentBee.startPositionY = currentBee.point3.y - currentBee.point0.y - currentBee.curveY - currentBee.bezierY;

			//this is x value of travel along the path
			currentBee.xtravel = currentBee.startPositionX*(currentBee.travelPosition*currentBee.travelPosition*currentBee.travelPosition) + currentBee.bezierX*(currentBee.travelPosition*currentBee.travelPosition) + currentBee.curveX*currentBee.travelPosition + currentBee.point0.x;
			//this is y value of travel along the path
			currentBee.ytravel = currentBee.startPositionY*(currentBee.travelPosition*currentBee.travelPosition*currentBee.travelPosition) + currentBee.bezierY*(currentBee.travelPosition*currentBee.travelPosition) + currentBee.curveY*currentBee.travelPosition + currentBee.point0.y;

			//the speed the bee will travel along the path
			currentBee.travelPosition += currentBee.speed;

			//the if statement adjusts the speed to stop at the end point
			if (currentBee.travelPosition > 1){
				currentBee.travelPosition = 1;
			
			}
				currentBee.timer--;
				if(currentBee.timer<=0){
				currentBee.transparency -= 1/100; 
				if(currentBee.transparency<0){
					currentBee.transparency=0;
				}
				console.log(currentBee.transparency);
				}
			ctx.save();
			ctx.globalAlpha = currentBee.transparency;
			//draws the bee image inside the canvas
			ctx.drawImage(beeImage, currentBee.xtravel, currentBee.ytravel, x / 25, y / 20);
			ctx.restore();

		}
		}
		setInterval(bee,33);
			//points of the path which the bee starts at and ends at to complete the path

			

			function buttonOne(){
				newBeeFunction(1);
				//this shows the animation but setting how many times the function is called
			}

			document.getElementById('buttonOne').addEventListener("click",buttonOne);

			function buttonTwo(){
				newBeeFunction(2);
			
			}

			document.getElementById('buttonTwo').addEventListener("click",buttonTwo);

			function buttonThree(){
				newBeeFunction(3);
			
			}

			document.getElementById('buttonThree').addEventListener("click",buttonThree);

			function buttonFour(){
				newBeeFunction(4);
		
			}

			document.getElementById('buttonFour').addEventListener("click",buttonFour);

			function buttonFive(){
				newBeeFunction(5);
			
			}

			document.getElementById('buttonFive').addEventListener("click",buttonFive);
		}


	</script>
</head>
<body>
	<canvas id="bee" width="800" height="600"></canvas><!--Creating a canvas element and giving it a width and a height-->
<button Id="buttonOne">Session 1</button>
<p>Session 1</p>
	<div id="result1"></div>
	

<button id="buttonTwo">Session 2</button>
	<p>Session 2</p>
	<div id="result2"></div>



<button id="buttonThree">Session 3</button>
	<p>Session 3</p>
	<div id="result3"></div>


<button id="buttonFour">Session 4</button>
	<p>Session 4</p>
	<div id="result4"></div>


<button id="buttonFive">Session 5</button>
	<p>Session 5</p>
	<div id="result5"></div>


	<button id="buttonReset">Reset</button>




	<p>Button press for conference sessions.</p>

	<script src="localStorage.js"></script>

</body>
</html>
